<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>RPG</title>
</head>

<body>
    <form onsubmit="return false" id="form">
        <input type="text" id="playerName" placeholder="entre un nom fpd (fruit de la passion)" required>
        <button type='submit' onclick='Start()'>Start</button>
    </form>
    <div id="error message"></div>
    <p id="messagefight"></p>
    <p id='title'></p>
    <div id="Combat">
      <p id="DisplayPlayer"></p>
      <p id="Display"></p>
    </div>
    <style>
        body {
        background-image: url('grass.png');
        }
        #player{
            border: 10px solid brown;
        }
        #Combat{
            display: flex;
            flex-direction: row;
            justify-content:space-between;
        }
        #DisplayPlayer{
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family :Arial, Helvetica, sans-serif;
            font-size: 30px;
            color: brown;
            text-shadow: 2px 2px 10px black;
        }
        #Display{
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family :Arial, Helvetica, sans-serif;
            font-size: 30px;
            color: brown;
            text-shadow: 2px 2px 10px black;
        }
        #title{
            display: flex;
            align-items: center;
            justify-content: center ;
            font-family :Arial, Helvetica, sans-serif;
            font-size: 40px;
            color: brown;
            text-shadow: 2px 2px 10px black;
        }

    </style>
    <script>
        var potion;
        var force;
        var agile;
        var endurance;
        var hp;
        var po;
        var Inventory;
        var enduranceia=7;
        var forceia=5;
        var hpia;
        const possibleIAName=["Andre","Thibaud","Angamara","François","Romain","Robin","Romuald"];
        function getRandomInt(max) {
            return Math.floor(Math.random() * Math.floor(max));
        }
        var iaName = possibleIAName[getRandomInt(6)];
        
        function DrawIA(){
            document.getElementById("DisplayPlayer").innerHTML =  "<h2>"+ playerName +"</h2>"+"<img id='player' src='Player.png' width='300' height='500'>" ;
            if (iaName=="Andre"){
                document.getElementById("Display").innerHTML = "<h2>Andre</h2>"+"<img id='player' src='Andre.png' width='300' height='500'>" ;
            }
            else if(iaName=="Thibaud"){
                document.getElementById("Display").innerHTML ="<h2>Thibaud</h2>"+ "<img id='player' src='Thibaud.png' width='300' height='500'>";
            }
            else if(iaName=="Angamara"){
                document.getElementById("Display").innerHTML = "<h2>Angamara</h2>"+"<img id='player'src='Angamara.png' width='300' height='500'>";
            }
            else if(iaName=="François"){
                document.getElementById("Display").innerHTML ="<h2>François</h2>"+"<img id='player' src='François.png' width='300' height='500'>"; 
            }
            else if(iaName=="Romain"){
                document.getElementById("Display").innerHTML ="<h2>Romain</h2>"+"<img id='player' src='Romain.png' width='300' height='500'>"; 
            }
            else if(iaName=="Robin"){
                document.getElementById("Display").innerHTML ="<h2>Robin</h2>"+ "<img id='player' src='Robin.png' width='300' height='500'>";
            }
            else if(iaName=="Romuald"){
                document.getElementById("Display").innerHTML ="<h1>Romuald</h1>"+ "<img id='player' src='Romuald.png' width='300' height='500'>";
            }
        }
        function Start() {
            if (playerName = document.getElementById("playerName").value == "") {

            }
            else {
                playerName = document.getElementById("playerName").value;
                Menu();
            }

        }
        function Menu() {
            document.getElementById("error message").innerHTML = "";
            document.getElementById("form").innerHTML = "<button type='submit' onclick='Shop()'>Shop</button>" + "<button type='submit' onclick='Fight()''>Fight</button>" +
                "<button type='submit' onclick='PlayerInventory()'>Inventory</button>";
        }
        function Shop() {
            document.getElementById("error message").innerHTML = "";
            document.getElementById("form").innerHTML = "<button type='submit' onclick='BuyPotion(\"strength\")'>Potion de Force </button>" +
                "<button type='submit' onclick='BuyPotion(\"agility\")'>Potion d'agilité</button>" + "<button type='submit' onclick='BuyPotion(\"endurance\")'>Potion d'endurance</button>" +
                "<button type='submit' onclick='BuyPotion(\"lifeSmall\")'>Petite potion de vie</button>" + "<button type='submit' onclick='BuyPotion(\"lifeBig\")'>Grosse potion de vie</button>" +
                "<button type='submit' onclick='Menu()'>Menu</button>";
        }
        function PlayerInventory() {
            document.getElementById("error message").innerHTML = "";
            document.getElementById("form").innerHTML = "<p>Que voulez vous utiliser?</p>" + "<button type='submit' onclick='StrengthPotion()'>Potion de Force </button>" +
                "<button type='submit' onclick='AgilityPotion()'>Potion d'agilité</button>" + "<button type='submit' onclick='EndurancePotion()'>Potion d'endurance</button>" +
                "<button type='submit' onclick='SmallLifePotion()'>Petite potion de vie</button>" + "<button type='submit' onclick='BigLifePotion()'>Grosse potion de vie</button>" +
                "<button type='submit' onclick='Menu()'>Menu</button>";
        }
        function Hero() {
            endurance = 100;
            hp = endurance
            force = 10;
            agile = 10;
            po = 0;
            Inventory = [];
        }

        function IA(){
            enduranceia;
            hpia = enduranceia
            forceia;
        }

        function IAwin(){
            enduranceia++
            hpia=enduranceia
            forceia++
        }

        Hero();
        IA();

        function Fight(Hero,IA) {
        DrawIA();
        document.getElementById("messagefight").innerHTML="<h1 id='title'>Début du combat!</h1>"
        while(hp > 0 || hpia > 0){
            var chance = random(100)
            if (0 < chance < agilite){
                hpia = hpia - force
            }else{
                hp = hp - forceia
            }
        }
        if (hp = 0){
            document.getElementById("messagefight").innerHTML="Vous avez perdu !"
        }else if(hpia = 0){
            document.getElementById("messagefight").innerHTML="Vous avez gagner"
            IAwin();
        }
    }


        function StrengthPotion() {
            if (Inventory.includes("strength")) {
                force = force + 1;
                Inventory.splice(Inventory.indexOf("strength", 1));
            }
            else {
                document.getElementById("error message").innerHTML = "Vous n'avez pas de potion de force";
            }
        }
        function AgilityPotion() {
            if (Inventory.includes("agility")) {
                agile = agile + 1;
                Inventory.splice(Inventory.indexOf("agility", 1));
            }
            else{
                document.getElementById("error message").innerHTML = "Vous n'avez pas de potion d'agilité";
            }

        }
        function EndurancePotion() {
            if (Inventory.includes("endurance")) {
            endurance = endurance + 1;
            Inventory.splice(Inventory.indexOf("endurance", 1));
            }
            else{
                document.getElementById("error message").innerHTML = "Vous n'avez pas de potion d'endurance";
            }
        }
        function SmallLifePotion() {
            if (Inventory.includes("lifeSmall")) {
            hp = hp + 10;
            Inventory.splice(Inventory.indexOf("lifeSmall", 1));
            }
            else{
                document.getElementById("error message").innerHTML = "Vous n'avez pas de petite potion de soin";                
            }
        }
        function BigLifePotion() {
            if (Inventory.includes("lifeBig")) {
            hp = hp + 20;
            Inventory.splice(Inventory.indexOf("lifeBig", 1));
            }
            else{
                document.getElementById("error message").innerHTML = "Vous n'avez pas de grande potion de soin";                
            }
        }
        function BuyPotion(potion) {
            document.getElementById("error message").innerHTML = "";
            if (potion == "strength" && po >= 2) {
                po = po - 2;
                Inventory.push("strength");
            }
            else if (potion == "agility" && po >= 2) {
                po = po - 2;
                Inventory.push("agility");
            }
            else if (potion == "endurance" && po >= 2) {
                po = po - 2;
                Inventory.push("endurance");
            }
            else if (potion == "lifeSmall" && po >= 3) {
                po = po - 3;
                Inventory.push("lifeSmall");
            }
            else if (potion == "lifeBig" && po >= 5) {
                po = po - 5;
                Inventory.push("lifeBig");
            }
            else {
                document.getElementById("error message").innerHTML = "you don't have enough money to buy this";
            }
        }
    </script>
</body>

</html>